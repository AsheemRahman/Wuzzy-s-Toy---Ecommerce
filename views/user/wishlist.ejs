<style>
    .products-container {
        padding: 2rem 0;
        margin-bottom: 5rem;
        display: flex;
        flex-direction: column;
        gap: 3rem;
    }

    .products-list-box {
        display: flex;
        flex-direction: row;
        gap: 1rem;
        flex-wrap: wrap;
        justify-content: space-evenly;
    }

    .product-box {
        text-decoration: none;
        color: #000000;
        border: 1px solid #b2b2b2;
        border-radius: 10px;
        width: 300px;
        padding: 1rem;
        margin-top: 2rem;
        text-overflow: ellipsis;
        position: relative;
    }

    .product-image-box {
        height: 250px;
        width: 100%;
    }

    .product-image-box img {
        margin: auto;
        width: 100%;
        height: 250px;
        object-fit: scale-down;
    }

    .product-text-row {
        max-width: 250px;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    .product-price {
        display: flex;
        flex-direction: row;
        align-items: center;
        gap: 0.5rem;
    }

    .product-star-rating {
        position: absolute;
        bottom: 0;
        right: -1rem;
    }

    .product-star-icon {
        color: orange;
    }

    .product-availability {
        position: absolute;
        top: 40%;
        left: 0;
        width: 100%;
        background-color: rgba(255, 255, 255, 0.499);
        padding: 1rem 0;
        font-size: 1.2rem;
        font-weight: 700;
        color: red;
        text-align: center;
        z-index: 200;
    }

    .no-product-banner {
        background: url("../../image/noproduct.webp");
        background-position: center;
        background-size: contain;
        background-repeat: no-repeat;
        height: 50vh;
        width: 100%;
    }

    .product-description-box {
        text-decoration: none;
        color: #000000;
    }

    .like-btn {
        display: none;
        scale: 1.5;
    }

    .wishlist-header {
        display: flex;
        color: #fefeeb;
        gap: 1rem;
        width: 100%;
        justify-content: center;
    }

    /* Empty products */
    .cart-empty {
        display: flex;
        justify-content: center;
    }

    .empty-cart {
        margin: 2rem 0rem;
        max-width: 1400px;
        width: 90%;
        border-radius: 1rem;
        border: transparent;
        background: #232323;
        height: 500px;
    }

    .empty-items {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100%;
        flex-direction: column;
        gap: 1rem;
    }

    .empty-items img {
        max-width: 200px;
        border-radius: 10px;
    }

    .empty-items h2 {
        color: #fefeeb;
    }

    .empty-cart p {
        display: flex;
        justify-content: center;
        align-items: center;
        color: #fefeeb;
        margin: 0;
    }
</style>
<%-include('navbar') %>
    <div class="products-container container">
        <div class="wishlist-header">
            <h3>Wishlist</h3>
            <h3>( <%= products.length %> )</h3>
        </div>
        <div class="products-list-box container">
            <% if(products.length!=0){ %>
                <% products.forEach((product)=>{ %>
                    <div class="product-box">
                        <% if(new Date(product.productID.createdAt).getTime()> (Date.now() - (10 * 24 * 60 * 60 *1000))) { %>
                            <div class="product-discount-box">
                                <h6>New Arrival</h6>
                            </div>
                            <% } else if (product.productID.productDiscount !=0) { %>
                                <div class="product-newarrival-box">
                                    <h6>
                                        <%= product.productID.productDiscount %> &percnt; OFF
                                    </h6>
                                </div>
                                <% } %>
                                    <div class="product-image-box">
                                        <img src="/<%= product.productID.productImage[0] %>" loading="lazy" />
                                    </div>
                                    <a href="/product-view/<%= product.productID.id %>" class="product-description-box">
                                        <h6 class="product-text-row">
                                            <%= product.productID.productName %>
                                        </h6>
                                        <h5 class="product-price">
                                            <i class="fa-solid fa-indian-rupee-sign product-text-row"></i>
                                            <%= product.productID.productPrice.toLocaleString() %>
                                        </h5>
                                    </a>
                                    <div>
                                        <div class="d-flex flex-row-reverse gap-3">
                                            <a onclick="removeWishlist('<%= product.productID.id %>')"
                                                class="wishlist-icon">
                                                <i class="fas fa-heart"></i></a>
                                            <a onclick="addToCart('<%= product.id %>','<%= product.productPrice %>','<%=user %>')"
                                                class="cart-icon"><i class="fas fa-shopping-cart"></i></a>
                                        </div>
                                        <% if(product.productID.productQuantity<=0){ %>
                                            <h6 class="product-availability">Out of Stock</h6>
                                            <% } %>
                                    </div>
                    </div>
                    <% }) %>
                        <% }else{ %>
                            <div class="cart-empty">
                                <div class="empty-cart">
                                    <div class="empty-items">
                                        <img src="/public/assets/empty-cart-image.webp">
                                        <h2 class="fw-bold">
                                            Your wishlist is empty!
                                        </h2>
                                        <p>
                                            Your wish is Our Wish , Add products to Wishlist
                                        </p>
                                        <a href="/user/home" class="btn btn-primary checkout">
                                            <i class="bi bi-arrow-left-circle" style="margin-right: 2rem;"></i>Shop Now
                                        </a>
                                    </div>
                                </div>
                            </div>
                            <% } %>
        </div>
    </div>
    <%-include('footer') %>